<!doctype html>
<head>
    <title>{{ title }}</title>
    <meta http-equiv="refresh" content="10">
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
    <link rel="stylesheet" href="http://weloveiconfonts.com/api/?family=fontawesome">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--[if lte IE 8]>
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/grids-responsive-old-ie-min.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/grids-responsive-min.css">
    <!--<![endif]-->
    <style type="text/css">
        .error {
        background-color: red;
        color: white;
        }
        a.error {
        color: white;
        }
        .errorInfo, .details {
        display: none;
        }
[class*="fontawesome-"]:before {
  font-family: 'FontAwesome', sans-serif;
}
.dashboard-piece {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    color: #fff;
    text-align: center;
    position: relative;
    padding-bottom: 0px;
    min-height: 120px;
    height: 120px;
    overflow: hidden;
}
.dashboard-title {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    color: #fff;
    text-align: center;
    position: relative;
    padding-bottom: 0px;
    padding: 0;
    margin:0;
}
.dashboard-title h1 {
    text-align: center;
    font-size: 110px;
    height: 50px;
    line-height: 50px;
    vertical-align: middle;
    margin: 0;
    opacity: 0.8;
    font-weight: lighter;
    overflow: hidden;
}
.dashboard-title-small {
    text-align: center;
}
.dashboard-title-small h1 {
    font-size: 24px;
    height: 25px;
    line-height: 25px;
    vertical-align: middle;
    margin: 0;
    opacity: 0.8;
    font-weight: lighter;
    overflow: hidden;
    color: #fff;
    letter-spacing: 0.3em;
}
.dashboard-content h2 {
    font-weight: lighter;
    font-size: 2em;
    opacity: 0.85;
    margin: 0.5em 0;
}
.dashboard-content h3 {
    font-weight: lighter;
    font-size: 1em;
    opacity: 0.5;
    margin: 0.5em 0;
}
.dashboard-piece-redbg, .status-alert {
    background-color: #E73F3F;
}
.dashboard-piece-orangebg, .status-warning {
    background-color: #F76C27;
}
.dashboard-piece-yellowbg, .status-okay {
    background-color: #E7E737;
}
.dashboard-piece-bluebg, .status-in-flux {
    background-color: #6D9DD1;
}
.dashboard-piece-greenbg, .status-good {
    background-color: rgb(28, 184, 65);
}
.dashboard-piece-purplebg {
    background-color: #7E45D3;
}
.dashboard-piece-graybg, .gray, .status-unknown {
    background-color: #798388;
}
.dashboard-content {
    position: relative;
    z-index: 999;
}
.dashboard-content p {
    font-weight: lighter;
}
.dashboard-content .light {
    opacity: 0.5;
    display: block;
}
.button-light {
            color: white;
            border-radius: 4px;
            text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
            background: none;
            opacity: 0.8;
            border: 1px solid rgba(255, 255, 255, 0.3);
}
.button-light:hover {
    background-image: linear-gradient(transparent,rgba(255,255,255,.05) 40%,rgba(255,255,255,.1));
}
.rotate-outer {
    position: absolute;
}
.rotate {
    transform: rotate(-90deg);
}

    </style>
</head>
<body class="gray">

<section class="dashboard pure-g-r clearfix">

    <div class="pure-g">
        <div class="pure-u-1 pure-u-lg-1-3">

            <div class="pure-g">
                <div class="pure-u-1 dashboard-title dashboard-piece-bluebg">
                    <h1>INGEST</h1>
                </div>
            </div>

            <div class="pure-g">
                <div class="pure-u-1-1 dashboard-title-small dashboard-piece-greybg">
                    <h1>FREQUENT CRAWLS</h1>
                </div>
                <div class="pure-u-1-1">

                    <div class="pure-g">
                        {% for job in ['daily','weekly', 'monthly', 'quarterly', 'six-monthly', 'annual'] %}
                        {% set crawler = services['jobs'][job] %}
                        <div class="pure-u-1-3 dashboard-piece dashboard-content{% if 'status-class' in crawler['state'] %} {{ crawler['state']['status-class'] }}{% else %} status-unknown{% endif %}">
                            <h2>{{ crawler['state']['status'] }}</h2>
                            <p>
                                <a class="button-light pure-button" href="{{ crawler['url'] }}engine/job/{{ crawler['name'] }}">{{
                                    job }}</a>
                                {% if job in crawler["error"] %}
                                <span class="errorInfo">{{ crawler["error"][job] }}</span>
                                {% endif %}
                            </p>
                        </div>
                        {% endfor %}
                    </div>

                </div>
                <div class="pure-u-1-1">

                    <div class="pure-g">
                        {% for q in ['PULSE01','PULSE02', 'PULSE03', 'PULSE04', 'PULSE05'] %}
                        {% set queue = services['queues'][q] %}
                        <div class="pure-u-1-5 dashboard-piece dashboard-content {% if 'status-class' in queue['state'] %} {{ queue['state']['status-class'] }}{% else %} status-unknown{% endif %}">
                            <h2>{{ queue['state']['status'] }}</h2>
                            <p>
                                <a class="button-light pure-button" href="" title="{{ queue['name'] }}">{{
                                    queue['short'] }}</a>
                            </p>
                        </div>
                        {% endfor %}
                    </div>

                </div>
                <!--
                <div class="pure-u-1-1">

                    <div class="pure-g">
                        {% for service in services['web'] %}
                        <div class="pure-u-1-{{ services['web'] | length }} dashboard-piece dashboard-content{% if 'status' in service %} {{ service[q]['status'] }}{% else %} status-unknown{% endif %}">
                            <h2>{{ service['status'] }}</h2>
                            <p>
                                <a class="button-light pure-button" href="{{ service['url'] }}">{{ service["name"] }}</a>
                            </p>
                        </div>
                        {% endfor %}
                    </div>

                </div>
                -->
                <div class="pure-u-1-1 dashboard-title-small dashboard-piece-greybg">
                    <h1>DOMAIN CRAWL</h1>
                </div>
                <div class="pure-u-1-1">
                    <div class="pure-g">
                        {% for job in ['dc0-2016', 'dc1-2016', 'dc2-2016','dc3-2016'] %}
                        {% set crawler = services['jobs'][job] %}
                        <div class="pure-u-1-2 dashboard-piece dashboard-content{% if 'status-class' in crawler['state'] %} {{ crawler['state']['status-class'] }}{% else %} status-unknown{% endif %}">
                            <h2>{{ crawler['state']['status'] }}</h2>
                            <p>
                                <a class="button-light pure-button" href="{{ crawler['url'] }}engine/job/{{ crawler['name'] }}">{{
                                    job }}</a>
                                {% if job in crawler["error"] %}
                                <span class="errorInfo">{{ crawler["error"][job] }}</span>
                                {% endif %}
                            </p>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                <div class="pure-u-1-1 dashboard-title-small dashboard-piece-greybg">
                    <h1>FREQUENT CRAWLS (BETA)</h1>
                </div>
                <div class="pure-u-1-1">

                    <div class="pure-g">
                        {% for job in ['daily-2','weekly-2', 'monthly-2', 'quarterly-2', 'six-monthly-2', 'annual-2'] %}
                        {% set crawler = services['jobs'][job] %}
                        <div class="pure-u-1-3 dashboard-piece dashboard-content{% if 'status-class' in crawler['state'] %} {{ crawler['state']['status-class'] }}{% else %} status-unknown{% endif %}">
                            <h2>{{ crawler['state']['status'] }}</h2>
                            <p>
                                <a class="button-light pure-button" href="{{ crawler['url'] }}engine/job/{{ job }}">{{
                                    job }}</a>
                                {% if job in crawler["error"] %}
                                <span class="errorInfo">{{ crawler["error"][job] }}</span>
                                {% endif %}
                            </p>
                        </div>
                        {% endfor %}
                    </div>

                </div>
                <div class="pure-u-1-1">

                    <div class="pure-g">
                        {% for q in ['PULSE01','PULSE02', 'PULSE03', 'PULSE04', 'PULSE05'] %}
                        {% set queue = services['queues'][q] %}
                        <div class="pure-u-1-5 dashboard-piece dashboard-content {% if 'status-class' in queue['state'] %} {{ queue['state']['status-class'] }}{% else %} status-unknown{% endif %}">
                            <h2>{{ queue['state']['status'] }}</h2>
                            <p>
                                <a class="button-light pure-button" href="" title="{{ queue['name'] }}">{{
                                    queue['short'] }}</a>
                            </p>
                        </div>
                        {% endfor %}
                    </div>

                </div>
             </div>
        </div>

        <div class="pure-u-1 pure-u-lg-1-3">

            <div class="pure-g">
                <div class="pure-u-1 dashboard-title dashboard-piece-bluebg">
                    <h1>PRESERVE</h1>
                </div>
            </div>

        </div>
        <div class="pure-u-1 pure-u-lg-1-3">

            <div class="pure-g">
                <div class="pure-u-1 dashboard-title dashboard-piece-bluebg">
                    <h1>ACCESS</h1>
                </div>
            </div>

        </div>
    </div>

</section>

</body>

