<!doctype html>
<head>
    <title>{{ title }}</title>
    <meta http-equiv="refresh" content="10">
    <link rel="stylesheet" href="/static/pure-min.css">
    <link rel="stylesheet" href="/static/font-awesome-4.6.3/css/font-awesome.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--[if lte IE 8]>
    <link rel="stylesheet" href="/static/grids-responsive-old-ie-min.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
    <link rel="stylesheet" href="/static/grids-responsive-min.css">
    <!--<![endif]-->
    <link rel="stylesheet" href="/static/main.css">
</head>
<body class="gray">

<section class="dashboard pure-g-r clearfix">

    <div class="pure-g">
        <div class="pure-u-1 pure-u-lg-1-3">

            <div class="pure-g">
                <div class="pure-u-1 dashboard-title dashboard-piece-bluebg">
                    <h1>INGEST</h1>
                </div>
            </div>

            <div class="pure-g">
                <div class="pure-u-1-1 dashboard-title-small dashboard-piece-greybg">
                    <h1>FREQUENT CRAWLS</h1>
                </div>
                <div class="pure-u-1-1">

                    <div class="pure-g">
                        {% for job in ['daily','weekly', 'monthly', 'quarterly', 'six-monthly', 'annual'] %}
                        {% set crawler = services['jobs'][job] %}
                        {% set tile_class = "pure-u-1-3" %}
                        {% include '_crawl_job.html' %}
                        {% endfor %}
                    </div>

                </div>
                <div class="pure-u-1-1">

                    <div class="pure-g">
                        {% for q in ['PULSE01','PULSE02', 'PULSE03', 'PULSE04', 'PULSE05'] %}
                        {% set queue = services['queues'][q] %}
                        {% set tile_class = "pure-u-1-5" %}
                        {% include '_queue.html' %}
                        {% endfor %}
                    </div>

                </div>
                <!--
                <div class="pure-u-1-1">

                    <div class="pure-g">
                        {% for service in services['web'] %}
                        <div class="pure-u-1-{{ services['web'] | length }} dashboard-piece dashboard-content{% if 'status' in service %} {{ service[q]['status'] }}{% else %} status-unknown{% endif %}">
                            <h2>{{ service['status'] }}</h2>
                            <p>
                                <a class="button-light pure-button" href="{{ service['url'] }}">{{ service["name"] }}</a>
                            </p>
                        </div>
                        {% endfor %}
                    </div>

                </div>
                -->
                <div class="pure-u-1-1 dashboard-title-small dashboard-piece-greybg">
                    <h1>DOMAIN CRAWL&nbsp;
                        <a href="{{ url_for('pause_dc')}}" title="PAUSE ALL DOMAIN CRAWL JOBS!"><i class="fa fa-pause-circle" aria-hidden="true"></i></a>
                        <a href="{{ url_for('unpause_dc')}}" title="UNPAUSE ALL DOMAIN CRAWL JOBS!"><i class="fa fa-play-circle" aria-hidden="true"></i></a>
                    </h1>
                </div>
                <div class="pure-u-1-1">
                    <div class="pure-g">
                        {% for job in ['dc0-2016', 'dc1-2016', 'dc2-2016','dc3-2016'] %}
                        {% set crawler = services['jobs'][job] %}
                        {% set tile_class = "pure-u-1-4" %}
                        {% include '_crawl_job.html' %}
                        {% endfor %}
                    </div>
                </div>
                <div class="pure-u-1-1">
                    <div class="pure-g">
                        {% for q in ['DC0','DC1','DC2','DC3'] %}
                        {% set tile_class = "pure-u-1-4" %}
                        {% set queue = services['queues'][q] %}
                        {% include '_queue.html' %}
                        {% endfor %}
                    </div>
                </div>
                <div class="pure-u-1-1 dashboard-title-small dashboard-piece-greybg">
                    <h1>FREQUENT CRAWLS (BETA)</h1>
                </div>
                <div class="pure-u-1-1">

                    <div class="pure-g">
                        {% for job in ['daily-2','weekly-2', 'monthly-2', 'quarterly-2', 'six-monthly-2', 'annual-2'] %}
                        {% set crawler = services['jobs'][job] %}
                        {% set tile_class = "pure-u-1-3" %}
                        {% include '_crawl_job.html' %}
                        {% endfor %}
                    </div>

                </div>
                <div class="pure-u-1-1">

                    <div class="pure-g">
                        {% for q in ['PULSE01','PULSE02', 'PULSE03', 'PULSE04', 'PULSE05'] %}
                        {% set queue = services['queues'][q] %}
                        {% set tile_class = "pure-u-1-5" %}
                        {% include '_queue.html' %}
                        {% endfor %}
                    </div>

                </div>
             </div>
        </div>

        <div class="pure-u-1 pure-u-lg-1-3">

            <div class="pure-g">
                <div class="pure-u-1 dashboard-title dashboard-piece-bluebg">
                    <h1>PRESERVE</h1>
                </div>

                <div class="pure-u-1-1 dashboard-title-small dashboard-piece-greybg">
                    <h1>PRODUCTION</h1>
                </div>

                <div class="pure-u-1-1">

                    <div class="pure-g">
                        {% set hdfs = services['hdfs']['hdfs-prod'] %}
<div class="pure-u-1-1 dashboard-piece dashboard-content {% if 'status-class' in hdfs['state'] %} {{ hdfs['state']['status-class'] }}{% else %} status-unknown{% endif %}">
    <h2 title="{{ hdfs['name'] }}: {{ hdfs['status'] }}">
        {{ hdfs['name'] }}
    </h2>
    <h3>{{ hdfs['state']['percent'] }} full</h3>
    <p class="tile-icon"><a href="{{ hdfs['name'] }}: {{ hdfs['status'] }}"><i class="fa fa-chain" aria-hidden="true"></i></a></p>
</div>
                    </div>

                </div>

            </div>

        </div>
        <div class="pure-u-1 pure-u-lg-1-3">

            <div class="pure-g">
                <div class="pure-u-1 dashboard-title dashboard-piece-bluebg">
                    <h1>ACCESS</h1>
                </div>

                <div class="pure-u-1-1 dashboard-title-small dashboard-piece-greybg">
                    <h1>UKWA</h1>
                </div>

                <div class="pure-u-1-1">

                    <div class="pure-g">
                        {% for h in ['ukwa', 'ukwa-at', 'ukwa-wb', 'ukwa-sh'] %}
                        {% set http = services['http'][h] %}
<div class="pure-u-1-4 dashboard-piece-hh dashboard-content {% if 'status-class' in http['state'] %} {{ http['state']['status-class'] }}{% else %} status-unknown{% endif %}">
    <h3 title="{{ http['name'] }}: {{ http['status'] }}">
        {{ http['name'] }}
    </h3>
    <p>{{ http['state']['status'] }}</p>
    <p class="tile-icon"><a href="{{ http['name'] }}: {{ http['status'] }}"><i class="fa fa-chain" aria-hidden="true"></i></a></p>
</div>

                        {% endfor %}
                    </div>

                </div>
            </div>

        </div>
    </div>

</section>

</body>

